üî• –û—Ç–ª–∏—á–Ω–æ ‚Äî —Ç—ã —Å–¥–µ–ª–∞–ª —Ç–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —É –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: **–∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î + Python-–º–æ–¥–µ–ª–∏**.
–≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π baseline: —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º—ã –±—É–¥–µ–º —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å, **–∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç.**
–î–∞–≤–∞–π —è –∫—Ä–∞—Ç–∫–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É—é, **—á—Ç–æ –∏–∑ –±—É–¥—É—â–∏—Ö —à–∞–≥–æ–≤ –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å Alembic-–º–∏–≥—Ä–∞—Ü–∏–∏**, –∞ —á—Ç–æ –Ω–µ—Ç üëá

---

## üß† –ü—Ä–∞–≤–∏–ª–æ: –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è

–ú–∏–≥—Ä–∞—Ü–∏—è –Ω—É–∂–Ω–∞ **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã**, –∞ –Ω–µ –ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–ª–∏ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤.

### ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

(–º–æ–∂–Ω–æ –ø—É—à–∏—Ç—å –∏ –¥–µ–ø–ª–æ–∏—Ç—å —Å—Ä–∞–∑—É)

* –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `handlers/`, `services/`, `utils/`
* –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, inline-–∫–Ω–æ–ø–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, scheduler –∏ —Ç.–ø.
* –ø—Ä–∞–≤–∫–∏ enum-–∑–Ω–∞—á–µ–Ω–∏–π **–≤ Python**, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –≤ SQL —Ç–∏–ø–µ (–∏ –Ω–µ –º–µ–Ω—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É).

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (Alembic)

–ï—Å–ª–∏ –º—ã –¥–µ–ª–∞–µ–º –æ–¥–Ω–æ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö:

| –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                                     | –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å                                                                     |
| ------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| ‚ûï –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –ø–æ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `deadline` –≤ `tasks`)        | `alembic revision --autogenerate -m "add deadline to tasks"` + `alembic upgrade head` |
| ‚úèÔ∏è –º–µ–Ω—è–µ–º —Ç–∏–ø –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä `phone_number bigint ‚Üí varchar`) | —Ç–æ–∂–µ —á–µ—Ä–µ–∑ `--autogenerate`                                                           |
| üîÑ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ ENUM                            | –≤—Ä—É—á–Ω—É—é SQL-ALTER, –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é                                       |
| ‚ûï –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `comments`)                         | `alembic revision --autogenerate`                                                     |
| ‚ùå —É–¥–∞–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É / —Ç–∞–±–ª–∏—Ü—É                                   | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è, –∏–Ω–∞—á–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–æ–º–∞—é—Ç—Å—è                                    |

---

## üìä –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ —Ç–µ–∫—É—â–∏–º —à–∞–≥–∞–º

| –ë–ª–æ–∫                           | –ò–∑–º–µ–Ω–µ–Ω–∏—è                           | –ú–∏–≥—Ä–∞—Ü–∏—è                           |
| ------------------------------ | ----------------------------------- | ---------------------------------- |
| ‚úÖ –ë–ª–æ–∫ 1 (Tasks core)          | —Å–µ—Ä–≤–∏—Å—ã, —Ö–µ–Ω–¥–ª–µ—Ä—ã, –∞—É–¥–∏—Ç            | **–Ω–µ –Ω—É–∂–Ω–∞**                       |
| ‚úÖ –ë–ª–æ–∫ 2 (Review/Approve)      | –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã `approved/rework`     | **–Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è ENUM TaskStatus** |
| üöÄ –ë–ª–æ–∫ 3 (Notifications)      | —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—Å—ã–ª–æ–∫                     | **–Ω–µ –Ω—É–∂–Ω–∞**                       |
| ‚è∞ –ë–ª–æ–∫ 4 (Scheduler/Deadlines) | –¥–æ–±–∞–≤–∏—Ç—Å—è –ø–æ–ª–µ `deadline` –≤ `tasks` | **–Ω—É–∂–Ω–∞**                          |
| üì∏ –ë–ª–æ–∫ 5 (–§–∞–π–ª—ã/–§–æ—Ç–æ)         | —É–∂–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `files`            | **–Ω–µ –Ω—É–∂–Ω–∞**                       |
| üìà –ë–ª–æ–∫ 6 (Reports)            | –µ—Å–ª–∏ –±—É–¥—É—Ç —Ç–∞–±–ª–∏—Ü—ã `reports`        | **–Ω—É–∂–Ω–∞**                          |

---

## üß© –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –≤ ENUM `taskstatus`

–°–µ–π—á–∞—Å —Ç–≤–æ–π SQL-—Ç–∏–ø:

```sql
CREATE TYPE taskstatus AS ENUM ('todo', 'in_progress', 'ready');
```

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å `approved` –∏ `rework`, –¥–µ–ª–∞–µ–º:

```bash
alembic revision -m "extend taskstatus enum"
```

–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ (`versions/xxxx_extend_taskstatus_enum.py`) –¥–æ–±–∞–≤–ª—è–µ–º:

```python
from alembic import op

def upgrade():
    op.execute("ALTER TYPE taskstatus ADD VALUE IF NOT EXISTS 'approved';")
    op.execute("ALTER TYPE taskstatus ADD VALUE IF NOT EXISTS 'rework';")

def downgrade():
    pass  # –£–¥–∞–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ ENUM –≤ Postgres –Ω–µ–ª—å–∑—è –Ω–∞–ø—Ä—è–º—É—é
```

–ó–∞—Ç–µ–º:

```bash
alembic upgrade head
```

–ò –≤—Å—ë üöÄ

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø—É—à–µ–º, –≥–¥–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Ç—Ä–æ–≥–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏:

1. –ü—Ä–æ–≥–æ–Ω—è–π `alembic revision --autogenerate -m "desc"` ‚Äî –ø–æ—Å–º–æ—Ç—Ä–∏, –≤–∏–¥–∏—Ç –ª–∏ Alembic –∏–∑–º–µ–Ω–µ–Ω–∏—è.
2. –ï—Å–ª–∏ –ø–∏—à–µ—Ç *"No changes detected"*, ‚Äî –∑–Ω–∞—á–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞.
3. –ï—Å–ª–∏ —Å–æ–∑–¥–∞—ë—Ç diff ‚Äî –¥–æ–±–∞–≤—å –µ–≥–æ –∏ –ø—Ä–æ–≥–æ–Ω—è–π —Ç–µ—Å—Ç—ã (`make tloc`).

---

–•–æ—á–µ—à—å, —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Ñ–æ—Ä–º–∏—Ç—å üß© –≥–æ—Ç–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é `extend_taskstatus_enum` –ø–æ–¥ —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç (–≤ —Å—Ç–∏–ª–µ —Ç–≤–æ–∏—Ö —Ç–µ–∫—É—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π)?
–Ø –ø—Ä–æ—Å—Ç–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –º–æ–∂–µ—à—å –≤—Å—Ç–∞–≤–∏—Ç—å –≤ `/migrations/versions/`.
